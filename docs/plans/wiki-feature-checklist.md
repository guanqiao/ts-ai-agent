# Wiki 功能增强验收检查清单

> 版本: 1.0.0  
> 创建日期: 2026-02-16  
> 关联文档: [wiki-enhancement-plan.md](./wiki-enhancement-plan.md) | [wiki-feature-tasks.md](./wiki-feature-tasks.md)

---

## Phase 1: P0 核心功能

### 1.1 Wiki 共享机制

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-1.1-01 | Git 集成共享 | 可将 Wiki 自动提交到指定 Git 目录 | ⬜ |
| F-1.1-02 | 共享路径配置 | 支持配置 `.wiki/` 或 `docs/wiki/` 等路径 | ⬜ |
| F-1.1-03 | 远程同步 | 支持与远程仓库同步（push/pull） | ⬜ |
| F-1.1-04 | 同步状态查询 | 可查询本地与远程的同步状态 | ⬜ |
| F-1.1-05 | 冲突检测 | 自动检测同步冲突 | ⬜ |
| F-1.1-06 | 冲突解决 | 提供冲突解决机制（自动/手动） | ⬜ |
| F-1.1-07 | 自动提交 | 支持配置自动提交 Wiki 变更 | ⬜ |
| F-1.1-08 | 提交消息模板 | 支持自定义提交消息模板 | ⬜ |

#### 接口验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| I-1.1-01 | WikiSharingConfig 接口 | 类型定义完整，包含所有配置项 | ⬜ |
| I-1.1-02 | WikiSharingService 接口 | 方法签名正确，返回类型明确 | ⬜ |
| I-1.1-03 | ShareResult 类型 | 包含成功/失败状态、详情 | ⬜ |
| I-1.1-04 | SyncResult 类型 | 包含同步详情、冲突列表 | ⬜ |
| I-1.1-05 | Conflict 类型 | 包含冲突详情、解决方案选项 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-1.1-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-1.1-02 | 配置测试 | 所有配置项测试通过 | ⬜ |
| T-1.1-03 | 共享测试 | Git 共享功能测试通过 | ⬜ |
| T-1.1-04 | 同步测试 | 远程同步功能测试通过 | ⬜ |
| T-1.1-05 | 冲突测试 | 冲突检测和解决测试通过 | ⬜ |
| T-1.1-06 | 集成测试 | 与 WikiManager 集成测试通过 | ⬜ |

---

### 1.2 引用关系图谱可视化

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-1.2-01 | 模块依赖图 | 可生成模块间依赖关系图 | ⬜ |
| F-1.2-02 | 文件依赖图 | 可生成文件间依赖关系图 | ⬜ |
| F-1.2-03 | 循环依赖检测 | 可检测并高亮循环依赖 | ⬜ |
| F-1.2-04 | 函数调用图 | 可生成函数调用关系图 | ⬜ |
| F-1.2-05 | 类继承图 | 可生成类继承关系图 | ⬜ |
| F-1.2-06 | 接口实现图 | 可生成接口实现关系图 | ⬜ |
| F-1.2-07 | Mermaid 导出 | 可导出 Mermaid 格式图表 | ⬜ |
| F-1.2-08 | SVG 导出 | 可导出 SVG 格式图表 | ⬜ |
| F-1.2-09 | JSON 导出 | 可导出 JSON 数据格式 | ⬜ |
| F-1.2-10 | 架构页面集成 | 架构页面包含图谱展示 | ⬜ |

#### 图表质量验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| Q-1.2-01 | 图表可读性 | 图表布局清晰，节点不重叠 | ⬜ |
| Q-1.2-02 | 图表完整性 | 所有依赖关系都被包含 | ⬜ |
| Q-1.2-03 | 循环依赖高亮 | 循环依赖用红色高亮显示 | ⬜ |
| Q-1.2-04 | Mermaid 语法正确 | 生成的 Mermaid 语法可正确渲染 | ⬜ |
| Q-1.2-05 | SVG 渲染正确 | SVG 图表可正确渲染 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-1.2-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-1.2-02 | 依赖图测试 | 各类依赖图生成测试通过 | ⬜ |
| T-1.2-03 | 调用图测试 | 函数调用图生成测试通过 | ⬜ |
| T-1.2-04 | 继承图测试 | 类继承图生成测试通过 | ⬜ |
| T-1.2-05 | 导出格式测试 | 各导出格式测试通过 | ⬜ |

---

## Phase 2: P1 协作功能

### 2.1 团队协作功能

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-2.1-01 | 用户添加 | 可添加贡献者到 Wiki | ⬜ |
| F-2.1-02 | 用户移除 | 可从 Wiki 移除贡献者 | ⬜ |
| F-2.1-03 | 角色分配 | 可为用户分配角色（管理员/编辑者/查看者） | ⬜ |
| F-2.1-04 | 权限检查 | 可检查用户对资源的操作权限 | ⬜ |
| F-2.1-05 | 页面锁 | 可锁定页面防止并发编辑 | ⬜ |
| F-2.1-06 | 锁释放 | 支持手动和自动释放锁 | ⬜ |
| F-2.1-07 | 锁超时 | 锁超时后自动释放 | ⬜ |
| F-2.1-08 | 活跃编辑者 | 可查看当前活跃的编辑者 | ⬜ |
| F-2.1-09 | 编辑会话 | 支持编辑会话管理 | ⬜ |

#### 权限验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| P-2.1-01 | 管理员权限 | 管理员拥有所有权限 | ⬜ |
| P-2.1-02 | 编辑者权限 | 编辑者可读写但不能管理 | ⬜ |
| P-2.1-03 | 查看者权限 | 查看者只能读取 | ⬜ |
| P-2.1-04 | 页面级权限 | 支持页面级权限覆盖 | ⬜ |
| P-2.1-05 | 权限继承 | 支持权限继承机制 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-2.1-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-2.1-02 | 用户管理测试 | 用户 CRUD 测试通过 | ⬜ |
| T-2.1-03 | 权限测试 | 权限检查测试通过 | ⬜ |
| T-2.1-04 | 锁测试 | 页面锁功能测试通过 | ⬜ |
| T-2.1-05 | 并发测试 | 并发编辑场景测试通过 | ⬜ |

---

### 2.2 隐性知识显性化（ADR）

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-2.2-01 | ADR 创建 | 可创建新的架构决策记录 | ⬜ |
| F-2.2-02 | ADR 更新 | 可更新现有 ADR | ⬜ |
| F-2.2-03 | ADR 查询 | 可查询和列表 ADR | ⬜ |
| F-2.2-04 | ADR 删除 | 可删除 ADR | ⬜ |
| F-2.2-05 | 状态流转 | 支持 proposed → accepted → deprecated → superseded | ⬜ |
| F-2.2-06 | 代码注释提取 | 可从 @decision 等注释提取 ADR | ⬜ |
| F-2.2-07 | 提交信息提取 | 可从提交信息提取 ADR | ⬜ |
| F-2.2-08 | 文档提取 | 可从文档提取 ADR | ⬜ |
| F-2.2-09 | 预设模板 | 提供标准 ADR 模板 | ⬜ |
| F-2.2-10 | 自定义模板 | 支持自定义 ADR 模板 | ⬜ |
| F-2.2-11 | 关联页面 | ADR 可关联 Wiki 页面 | ⬜ |
| F-2.2-12 | 关联代码 | ADR 可关联代码文件 | ⬜ |

#### ADR 质量验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| Q-2.2-01 | ADR 格式 | 符合 ADR 标准格式 | ⬜ |
| Q-2.2-02 | 必填字段 | context, decision, consequences 必填 | ⬜ |
| Q-2.2-03 | 提取准确率 | 自动提取准确率 ≥ 70% | ⬜ |
| Q-2.2-04 | 模板变量 | 模板变量正确填充 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-2.2-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-2.2-02 | CRUD 测试 | ADR CRUD 测试通过 | ⬜ |
| T-2.2-03 | 状态流转测试 | 状态流转测试通过 | ⬜ |
| T-2.2-04 | 提取测试 | 自动提取测试通过 | ⬜ |
| T-2.2-05 | 模板测试 | 模板功能测试通过 | ⬜ |

---

## Phase 3: P2 体验增强

### 3.1 Wiki 编辑器增强

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-3.1-01 | Markdown 编辑 | 支持 Markdown 源码编辑 | ⬜ |
| F-3.1-02 | 分屏预览 | 支持编辑和预览分屏显示 | ⬜ |
| F-3.1-03 | 自动保存 | 支持自动保存草稿 | ⬜ |
| F-3.1-04 | 草稿恢复 | 支持恢复未保存的草稿 | ⬜ |
| F-3.1-05 | 预设模板 | 提供多种预设模板 | ⬜ |
| F-3.1-06 | 模板应用 | 可应用模板到当前编辑 | ⬜ |
| F-3.1-07 | 自定义模板 | 支持创建自定义模板 | ⬜ |
| F-3.1-08 | 编辑会话 | 支持编辑会话管理 | ⬜ |

#### 编辑体验验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| E-3.1-01 | 响应速度 | 编辑响应延迟 < 100ms | ⬜ |
| E-3.1-02 | 预览同步 | 预览与编辑同步滚动 | ⬜ |
| E-3.1-03 | 保存提示 | 有未保存更改时提示 | ⬜ |
| E-3.1-04 | 模板预览 | 应用模板前可预览 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-3.1-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-3.1-02 | 会话测试 | 编辑会话测试通过 | ⬜ |
| T-3.1-03 | 自动保存测试 | 自动保存功能测试通过 | ⬜ |
| T-3.1-04 | 模板测试 | 模板功能测试通过 | ⬜ |

---

### 3.2 架构文档可视化

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-3.2-01 | 分层架构图 | 可生成分层架构图 | ⬜ |
| F-3.2-02 | 组件架构图 | 可生成组件架构图 | ⬜ |
| F-3.2-03 | 部署架构图 | 可生成部署架构图 | ⬜ |
| F-3.2-04 | Mermaid 导出 | 可导出 Mermaid 格式 | ⬜ |
| F-3.2-05 | SVG 导出 | 可导出 SVG 格式 | ⬜ |
| F-3.2-06 | PNG 导出 | 可导出 PNG 格式 | ⬜ |
| F-3.2-07 | 架构页面集成 | 架构页面包含架构图 | ⬜ |

#### 图表质量验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| Q-3.2-01 | 分层清晰 | 各层边界清晰可见 | ⬜ |
| Q-3.2-02 | 组件完整 | 所有组件都被包含 | ⬜ |
| Q-3.2-03 | 连接正确 | 组件间连接关系正确 | ⬜ |
| Q-3.2-04 | 导出质量 | 导出图表清晰可读 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-3.2-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-3.2-02 | 架构图测试 | 各类架构图生成测试通过 | ⬜ |
| T-3.2-03 | 导出测试 | 各导出格式测试通过 | ⬜ |

---

## Phase 4: P3 高级功能

### 4.1 知识图谱构建

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-4.1-01 | 概念节点提取 | 可从代码和文档提取概念节点 | ⬜ |
| F-4.1-02 | API 节点提取 | 可提取 API 节点 | ⬜ |
| F-4.1-03 | 模式节点提取 | 可提取设计模式节点 | ⬜ |
| F-4.1-04 | 关系构建 | 可构建节点间关系 | ⬜ |
| F-4.1-05 | 聚类分析 | 可对节点进行聚类 | ⬜ |
| F-4.1-06 | 相关节点查询 | 可查询相关节点 | ⬜ |
| F-4.1-07 | 学习路径生成 | 可生成学习路径 | ⬜ |
| F-4.1-08 | 智能推荐 | 可提供智能推荐 | ⬜ |
| F-4.1-09 | JSON 导出 | 可导出 JSON 格式图谱 | ⬜ |

#### 图谱质量验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| Q-4.1-01 | 节点准确率 | 提取节点准确率 ≥ 80% | ⬜ |
| Q-4.1-02 | 关系准确率 | 关系准确率 ≥ 75% | ⬜ |
| Q-4.1-03 | 推荐相关性 | 推荐相关性评分 ≥ 0.7 | ⬜ |
| Q-4.1-04 | 路径合理性 | 学习路径合理可行 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-4.1-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-4.1-02 | 节点提取测试 | 节点提取测试通过 | ⬜ |
| T-4.1-03 | 关系构建测试 | 关系构建测试通过 | ⬜ |
| T-4.1-04 | 推荐测试 | 推荐功能测试通过 | ⬜ |

---

### 4.2 变更影响分析增强

#### 功能验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| F-4.2-01 | 直接影响分析 | 可分析文件变更的直接影响 | ⬜ |
| F-4.2-02 | 间接影响分析 | 可分析间接影响 | ⬜ |
| F-4.2-03 | 影响链路追踪 | 可追踪影响传播链路 | ⬜ |
| F-4.2-04 | 风险评分 | 可计算变更风险评分 | ⬜ |
| F-4.2-05 | 风险因素识别 | 可识别风险因素 | ⬜ |
| F-4.2-06 | 缓解建议 | 可生成风险缓解建议 | ⬜ |
| F-4.2-07 | 文档更新建议 | 可建议需要更新的文档 | ⬜ |
| F-4.2-08 | 测试运行建议 | 可建议需要运行的测试 | ⬜ |
| F-4.2-09 | 通知建议 | 可建议需要通知的人员 | ⬜ |

#### 分析质量验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| Q-4.2-01 | 影响覆盖率 | 影响分析覆盖率 ≥ 90% | ⬜ |
| Q-4.2-02 | 风险准确率 | 风险评估准确率 ≥ 80% | ⬜ |
| Q-4.2-03 | 建议有效性 | 建议操作有效率 ≥ 70% | ⬜ |
| Q-4.2-04 | 链路完整性 | 影响链路完整追踪 | ⬜ |

#### 测试验收

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| T-4.2-01 | 单元测试覆盖 | 覆盖率 ≥ 80% | ⬜ |
| T-4.2-02 | 影响分析测试 | 影响分析测试通过 | ⬜ |
| T-4.2-03 | 风险评估测试 | 风险评估测试通过 | ⬜ |
| T-4.2-04 | 建议生成测试 | 建议生成测试通过 | ⬜ |

---

## 总体验收

### 代码质量

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| C-01 | 代码规范 | 符合项目代码规范 | ⬜ |
| C-02 | 类型安全 | 无 TypeScript 类型错误 | ⬜ |
| C-03 | Lint 检查 | 无 ESLint 错误 | ⬜ |
| C-04 | 注释完整 | 关键逻辑有清晰注释 | ⬜ |
| C-05 | 文件大小 | 单文件 ≤ 1000 行 | ⬜ |

### 文档完整性

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| D-01 | API 文档 | 所有公开 API 有文档 | ⬜ |
| D-02 | 类型文档 | 所有类型有 JSDoc | ⬜ |
| D-03 | 使用示例 | 提供使用示例 | ⬜ |
| D-04 | 更新日志 | 更新 CHANGELOG | ⬜ |

### 集成测试

| 编号 | 检查项 | 验收标准 | 状态 |
|------|-------|---------|------|
| I-01 | WikiManager 集成 | 新功能与 WikiManager 正确集成 | ⬜ |
| I-02 | 现有功能兼容 | 不影响现有功能 | ⬜ |
| I-03 | 性能影响 | 性能下降 < 5% | ⬜ |
| I-04 | 内存影响 | 内存增长 < 10% | ⬜ |

---

## 验收统计

| 阶段 | 功能项 | 接口项 | 测试项 | 质量项 | 总计 |
|------|-------|-------|-------|-------|------|
| Phase 1 | 18 | 5 | 11 | 5 | 39 |
| Phase 2 | 21 | 0 | 10 | 4 | 35 |
| Phase 3 | 15 | 0 | 7 | 4 | 26 |
| Phase 4 | 18 | 0 | 12 | 4 | 34 |
| 总体 | 0 | 0 | 0 | 15 | 15 |
| **总计** | **72** | **5** | **40** | **17** | **149** |

---

## 验收流程

1. **开发自测**: 开发者完成功能后进行自测
2. **代码审查**: 提交 PR 进行代码审查
3. **测试验证**: 运行完整测试套件
4. **集成验证**: 验证与现有功能的集成
5. **文档审核**: 检查文档完整性
6. **最终验收**: 所有检查项通过后标记完成

---

## 验收签字

| 阶段 | 验收人 | 日期 | 签字 |
|------|-------|------|------|
| Phase 1 | | | |
| Phase 2 | | | |
| Phase 3 | | | |
| Phase 4 | | | |
| 最终验收 | | | |
