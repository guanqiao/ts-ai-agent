## WikiKnowledgeBase 集成测试计划

### 测试文件
创建 `tests/wiki/wiki-knowledge-base.test.ts`

### 测试场景覆盖

#### 1. 索引功能 (index)
- 索引空文档
- 索引单个页面
- 索引多个页面
- 重新索引清除旧数据

#### 2. 查询功能 (query)
- 无索引时查询返回默认消息
- 关键词匹配查询（无 LLM）
- LLM 集成查询（Mock LLMService）
- LLM 调用失败回退到关键词匹配

#### 3. 搜索功能 (search)
- 标题关键词搜索
- 内容关键词搜索
- 标签搜索
- 多关键词组合搜索
- 搜索结果按分数排序
- 搜索结果限制（最多 10 个）

#### 4. 相关页面功能 (getRelatedPages)
- Markdown 内部链接提取
- WikiLink 内部链接提取
- 外部链接过滤
- 无链接页面返回空数组

#### 5. 上下文获取 (getContext)
- 获取单个主题上下文
- 无匹配主题返回空字符串
- 多页面上下文拼接格式

#### 6. LLM 服务集成 (setLLMService)
- 构造函数注入 LLM 服务
- setLLMService 方法设置服务
- LLM 查询上下文构建

#### 7. 边界情况
- 特殊字符处理
- 长内容截断
- 章节解析

### 技术方案
- 使用 Jest 测试框架
- Mock LLMService 避免真实 API 调用
- 遵循现有测试文件风格