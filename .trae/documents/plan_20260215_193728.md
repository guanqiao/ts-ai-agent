# Wiki 功能差距开发计划

## 一、功能差距分析

### Qoder Wiki 核心特性 vs 当前实现

| Qoder 特性 | 当前状态 | 差距程度 |
|-----------|---------|---------|
| Repo Wiki 文档生成 | ✅ 已实现 | 无 |
| Git 变更监控与同步 | ✅ 已实现 | 无 |
| 向量语义搜索 | ✅ 已实现 | 无 |
| 动态记忆（编码风格学习） | ✅ 已实现 | 无 |
| 提示词增强 | ✅ 已实现 | 无 |
| 上下文压缩 | ✅ 已实现 | 无 |
| **架构图/流程图生成** | ❌ 未实现 | 中 |
| **变更日志自动生成** | ❌ 未实现 | 中 |
| **代码示例提取** | ❌ 未实现 | 中 |
| **多项目/Monorepo 支持** | ❌ 未实现 | 中 |
| **Action Flow 执行跟踪** | ❌ 未实现 | 中 |
| **多语言解析器扩展** | ❌ 未实现 | 高 |

---

## 二、开发计划（按优先级排序）

### Phase 1: 图表生成模块（中难度）
**目标**: 自动生成架构图、流程图、依赖关系图

**任务**:
1. 创建 `src/diagram/types.ts` - 图表类型定义
2. 创建 `src/diagram/mermaid-generator.ts` - Mermaid 图表生成器
3. 创建 `src/diagram/architecture-diagram.ts` - 架构图生成
4. 创建 `src/diagram/dependency-diagram.ts` - 依赖关系图生成
5. 创建 `src/diagram/flow-diagram.ts` - 流程图生成
6. 集成到 WikiManager 的页面生成

### Phase 2: 变更日志生成（中难度）
**目标**: 基于 Git 提交历史自动生成 CHANGELOG

**任务**:
1. 创建 `src/changelog/types.ts` - 变更日志类型定义
2. 创建 `src/changelog/commit-parser.ts` - 约定式提交解析
3. 创建 `src/changelog/changelog-generator.ts` - 变更日志生成器
4. 创建 `src/changelog/version-manager.ts` - 版本管理
5. 集成到 WikiManager 和 CLI

### Phase 3: 代码示例提取（中难度）
**目标**: 从测试文件和使用示例自动提取代码片段

**任务**:
1. 创建 `src/examples/types.ts` - 示例类型定义
2. 创建 `src/examples/example-extractor.ts` - 示例提取器
3. 创建 `src/examples/test-parser.ts` - 测试文件解析
4. 创建 `src/examples/example-integrator.ts` - 示例集成到文档
5. 更新 API 文档页面生成

### Phase 4: Action Flow 执行跟踪（中难度）
**目标**: 透明化 AI 工作过程，提供实时执行跟踪

**任务**:
1. 创建 `src/action-flow/types.ts` - Action Flow 类型定义
2. 创建 `src/action-flow/task-tracker.ts` - 任务跟踪器
3. 创建 `src/action-flow/execution-logger.ts` - 执行日志
4. 创建 `src/action-flow/progress-reporter.ts` - 进度报告
5. 集成到 Agent 系统

### Phase 5: 多项目支持（中难度）
**目标**: 支持 Monorepo 和多项目文档聚合

**任务**:
1. 扩展 `src/wiki/types.ts` - 多项目类型定义
2. 创建 `src/wiki/multi-project-manager.ts` - 多项目管理
3. 创建 `src/wiki/project-aggregator.ts` - 文档聚合器
4. 创建 `src/wiki/cross-project-search.ts` - 跨项目搜索
5. 更新 CLI 支持多项目命令

### Phase 6: 多语言解析器扩展（高难度）
**目标**: 支持 Python、Go、Java、Rust 等主流语言

**任务**:
1. 创建 `src/parsers/base-parser.ts` - 解析器基类抽象
2. 创建 `src/parsers/python-parser.ts` - Python 解析器
3. 创建 `src/parsers/go-parser.ts` - Go 解析器
4. 创建 `src/parsers/rust-parser.ts` - Rust 解析器
5. 更新 CLI 和 WikiManager 支持多语言

---

## 三、预计工作量

| Phase | 模块数 | 预计文件数 | 优先级 |
|-------|-------|-----------|-------|
| Phase 1 | 1 | 6 | 高 |
| Phase 2 | 1 | 5 | 高 |
| Phase 3 | 1 | 5 | 中 |
| Phase 4 | 1 | 5 | 中 |
| Phase 5 | 1 | 5 | 中 |
| Phase 6 | 1 | 5+ | 低 |

**总计**: 6 个新模块，约 31 个新文件

---

## 四、实施建议

1. **优先实施 Phase 1-2**: 图表生成和变更日志是提升文档质量的关键功能
2. **Phase 3-4 可并行**: 代码示例提取和 Action Flow 相对独立
3. **Phase 5-6 视需求**: 多项目支持和多语言解析器可根据实际需求决定